<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{fragment/school/school_layout}">

<th:block layout:fragment="content">
<h2>신규회원 리스트</h2>
<div class="row">
	<div class="col">
		<table class="table" id="memberTable">
			<thead>
				<tr>
					<td>No(ID)</td>
					<td>이름</td>
					<td>신청일(시간)</td>
					<td>신청대학</td>
					<td>신청학과</td>
					<td style="text-align: center;">신청직책</td>
					<td style="text-align: center;">승인여부</td>
				</tr>
			</thead>
				<tbody>
				<th:block th:if="${#lists.size(memberList) == 0}">
 					<tr>
 						<td colspan="7">조회된 회원이 없습니다.</td>
 					</tr>
 				</th:block>
 				<th:block th:unless="${#lists.size(memberList) == 0}">
					<tr th:each="member : ${memberList}">
						<td>
							[[${member.memNo}]]
							<input type="hidden" id="memNo" th:value="${member.memNo}">
						</td>
						<td>[[${member.memName}]]</td>
						<td>[[${member.regDate}]]</td>
						<td>
							<select class="form-select" name="collNo" id="collNo" onchange="changeColl(this);">
									<option th:each="coll : ${colleageList}" th:value="${coll.collNo}">[[${coll.collName}]]</option>
							</select>
						</td>
						<td id="deptDiv">
							<select class="form-select" name="deptNo" id="deptNo">
								<option th:each="dept : ${deptList}" th:value="${dept.deptNo}" th:if="${colleageList[0].collNo==dept.collNo}">
									[[${dept.deptName}]]
								</option>
							</select>
						</td>
						<td style="text-align: center;">
							<input type="hidden" id="memRole" th:value="${member.memRole}">[[${member.memRole}]]
						</td>
						<td style="text-align: center;">
							<button id="memRole" class="btn btn-primary" th:onclick="updatePosition([[${member.memNo}]]);" style="cursor: pointer;">승인완료</button>
							<button class="btn btn-danger" type="button" th:onclick="updateXPosition([[${member.memNo}]]);" style="cursor: pointer;">승인거부</button>
						</td>
					</tr>
				</th:block>
			</tbody>
		</table>
	</div>
</div>


</th:block>

<!-- 연결해야 할 외부 js파일 -->
<th:block layout:fragment="content_js">
	<script type="text/javascript" src="/js/content/school/member.js"></script> 
</th:block>

</html>